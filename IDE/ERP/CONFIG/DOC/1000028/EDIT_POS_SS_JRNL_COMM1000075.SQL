EXECUTE BLOCK (
  Q_J_ID TYPE OF COLUMN TABL$J_4.ID = ?ID
)RETURNS (
  ID     TYPE OF COLUMN TABL$J_4.ID
)
AS
  DECLARE VARIABLE P_DOCSUM       TYPE OF COLUMN TABL$J_4.DOCSUM;
  DECLARE VARIABLE P_DOCSUM2      TYPE OF COLUMN TABL$J_4.DOCSUM;
  DECLARE VARIABLE P_FIRM_ID      TYPE OF COLUMN TABL$J_4.FIRM_ID;
  DECLARE VARIABLE P_CS_ID        TYPE OF COLUMN TABL$J_1000014.CS_ID;
  DECLARE VARIABLE P_DOCNUMBER    TYPE OF COLUMN TABL$J_4.DOCNUMBER;
  DECLARE VARIABLE P_J_1000020_ID TYPE OF COLUMN TABL$J_4.ID;
  DECLARE VARIABLE P_J_1000021_ID TYPE OF COLUMN TABL$J_4.ID;
  DECLARE VARIABLE P_J_1000026_ID TYPE OF COLUMN TABL$J_4.ID;
  DECLARE VARIABLE P_TMC_ID       TYPE OF COLUMN TABL$R_TMC_P.TMC_ID;
  DECLARE VARIABLE P_PRICE        TYPE OF COLUMN TABL$R_TMC_P.PRICE;
  DECLARE VARIABLE P_VALUE_DATE   TYPE OF COLUMN TABL$R_TMC_P.VALUE_DATE;
BEGIN
  ID = :Q_J_ID;
  SELECT FIRST 1 J.DOCSUM, J.FIRM_ID, J14.CS_ID
  FROM   TABL$J_4 J, TABL$J_1000014 J14
  WHERE  (J.ID = :ID)
    AND  (J14.J_ID = J.ID)
  INTO   :P_DOCSUM, :P_FIRM_ID, :P_CS_ID;

  SELECT FIRST 1 P.NEW_NUMBER FROM PROC$J_GEN_4(1000075, :P_FIRM_ID)P INTO :P_DOCNUMBER;
  
  UPDATE TABL$J_4 J SET J.TYPE_ID = 1000075, J.DOCNUMBER = :P_DOCNUMBER WHERE (J.ID = :ID);

  UPDATE TABL$J_4 J SET J.FLAG_COMMIT = 1 WHERE (J.ID = :ID);
  
  SUSPEND;
END
