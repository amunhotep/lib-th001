EXECUTE BLOCK (
  Q_J_ID TYPE OF COLUMN TABL$J_4.ID = ?J_ID
)AS
  DECLARE VARIABLE P_TYPE_IDS  TYPE OF COLUMN TABL$J_4.DOCSTR;
  DECLARE VARIABLE P_PARENT_ID TYPE OF COLUMN TABL$J_4.ID;
  DECLARE VARIABLE P_DUMMY     TYPE OF COLUMN TABL$J_4.ID;
BEGIN
  IF(NOT(EXISTS(SELECT JP.ID FROM TABL$J_4 JP WHERE(JP.ID = :Q_J_ID     ))))THEN EXIT;
  SELECT '~'||LIST(TMP.ID,'~')||'~'
  FROM   (  WITH RECURSIVE TP AS(
              SELECT TP1.ID, TP1.PARENT_ID FROM TABL$_TB_TYPES TP1         WHERE (TP1.ID = 1000014)
              UNION ALL
              SELECT TP2.ID, TP2.PARENT_ID FROM TABL$_TB_TYPES TP2, TP TP3 WHERE (TP2.PARENT_ID = TP3.ID)
            )SELECT T.ID FROM TP T ) TMP
  INTO   :P_TYPE_IDS;
  
  P_TYPE_IDS = :P_TYPE_IDS||'1000141~';
  P_PARENT_ID = 0;
  SELECT FIRST 1 COALESCE(J.ID, 0)
  FROM   TABL$J_CHILDS JC, TABL$J_4 J
  WHERE  (JC.J_CHILD_ID = :Q_J_ID)
    AND  (J.ID = JC.J_ID)
    AND  (:P_TYPE_IDS CONTAINING '~'||J.TYPE_ID||'~')
  INTO   :P_PARENT_ID;

  IF(NOT(EXISTS(SELECT JP.ID FROM TABL$J_4 JP WHERE(JP.ID = :P_PARENT_ID))))THEN EXIT;

  SELECT MAX(P.J_ID)
  FROM PROC$J_INS_1000014_1000014(:P_PARENT_ID, :Q_J_ID) P
  INTO  :P_DUMMY;
END
