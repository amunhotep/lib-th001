SELECT CAST(T.INDENT AS DOMN$PSTRING_8192) AS INDENT, R0000.ID AS DS$ID
      ,R0000.FLAG_DELETE
      ,R0000.FLAG_COMMIT
      ,R0000.FLAG_LOCK
      ,R0000.ID
      ,R0000.TYPE_ID
      ,(SELECT FIRST 1 T0001.NAME FROM TABL$_TB_DOCS T0001 WHERE (T0001.ID = R0000.TYPE_ID)) AS TYPE_ID_
      ,R0000.DOCNUMBER
      ,R0000.DOCNUMBERSTR
      ,R0000.DOCNUMBERIN
      ,R0000.VALUTE_ID
      ,(SELECT FIRST 1 T0002.VALUTE_SHORT FROM TABL$R_COUNTRIES T0002 WHERE (T0002.ID = R0000.VALUTE_ID)) AS VALUTE_ID_
      ,R0000.DOCSUMVAL
      ,R0000.DOCSUM
      ,R0000.NAME
      ,R0000.DATE_COMMIT
      ,(EXTRACT(YEAR FROM R0000.DATE_COMMIT)) AS DATE_COMMIT_YEAR
      ,(EXTRACT(MONTH FROM R0000.DATE_COMMIT)) AS DATE_COMMIT_MONTH
      ,(EXTRACT(DAY FROM R0000.DATE_COMMIT)) AS DATE_COMMIT_DAY
      ,R0000.FIRM_ID
      ,(SELECT FIRST 1 T0003.NAME FROM TABL$R_FIRMS T0003 WHERE (T0003.ID = R0000.FIRM_ID)) AS FIRM_ID_
      ,R0000.FILIAL_ID
      ,(SELECT FIRST 1 T0004.NAME FROM TABL$R_FILIALS T0004 WHERE (T0004.ID = R0000.FILIAL_ID)) AS FILIAL_ID_
      ,R0000.USER_ID
      ,(SELECT FIRST 1 T0005.ID FROM TABL$_USERS T0005 WHERE (T0005.ID = R0000.USER_ID)) AS USER_ID_
      ,(SELECT FIRST 1 COALESCE(WZZ.NAME, R0000.USER_ID) FROM TABL$R_WRK WZZ WHERE (TRIM(WZZ.USER_NAME) = R0000.USER_ID) ) AS WRK_NAME
      ,R0000.DOCSTR
      ,(SELECT FIRST 1 TBD01.COLOR_FRG FROM TABL$_TB_DOCS TBD01 WHERE (TBD01.ID = R0000.TYPE_ID)) AS COLOR_FRG
      ,(SELECT FIRST 1 TBD01.COLOR_BGR FROM TABL$_TB_DOCS TBD01 WHERE (TBD01.ID = R0000.TYPE_ID)) AS COLOR_BGR 
FROM   (WITH RECURSIVE DOCTREE AS( 
                SELECT DOCTREE1.J_ID, DOCTREE1.J_CHILD_ID, CAST('|--+' AS DOMN$PSTRING_8192) AS INDENT 
                FROM   (SELECT JC.J_ID, JC.J_CHILD_ID FROM TABL$J_CHILDS JC WHERE  (JC.J_ID = ?ID)ORDER BY JC.J_CHILD_ID ASCENDING ) DOCTREE1 
                UNION ALL 
                SELECT DOCTREE2.J_ID, DOCTREE2.J_CHILD_ID, CAST('   '||DOCTREE3.INDENT AS DOMN$PSTRING_8192) 
                FROM   TABL$J_CHILDS DOCTREE2, DOCTREE DOCTREE3 WHERE (DOCTREE2.J_ID = DOCTREE3.J_CHILD_ID) 
            )SELECT T1.J_CHILD_ID, T1.INDENT FROM DOCTREE T1 ) AS T, TABL$J_4 R0000 
WHERE (R0000.ID = T.J_CHILD_ID)
