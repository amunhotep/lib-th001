EXECUTE BLOCK (
   Q_DATE_FROM TYPE OF COLUMN TABL$P_CS_POLL.REG_DATE = ?DATE_FROM
  ,Q_DATE_TO   TYPE OF COLUMN TABL$P_CS_POLL.REG_DATE = ?DATE_TO
)RETURNS ( 
   DATE_FROM   TYPE OF COLUMN TABL$P_CS_POLL.REG_DATE
  ,DATE_TO     TYPE OF COLUMN TABL$P_CS_POLL.REG_DATE
  ,FILIAL_ID   TYPE OF COLUMN TABL$P_CS_POLL.FILIAL_ID 
  ,FILIAL_NAME TYPE OF COLUMN TABL$R_FILIALS.NAME 
  ,Q0001       TYPE OF COLUMN TABL$P_CS_POLL.Q0001 
  ,Q0002       TYPE OF COLUMN TABL$P_CS_POLL.Q0002 
  ,Q0003       TYPE OF COLUMN TABL$P_CS_POLL.Q0003 
  ,Q0004       TYPE OF COLUMN TABL$P_CS_POLL.Q0004 
  ,Q0005       TYPE OF COLUMN TABL$P_CS_POLL.Q0005 
  ,Q0006       TYPE OF COLUMN TABL$P_CS_POLL.Q0006 
  ,Q0007       TYPE OF COLUMN TABL$P_CS_POLL.Q0007 
  ,Q0008       TYPE OF COLUMN TABL$P_CS_POLL.Q0008 
  ,Q0009       TYPE OF COLUMN TABL$P_CS_POLL.Q0009 
  ,Q0010       TYPE OF COLUMN TABL$P_CS_POLL.Q0010 
  ,Q0011       TYPE OF COLUMN TABL$P_CS_POLL.Q0011 
  ,Q0012       TYPE OF COLUMN TABL$P_CS_POLL.Q0012 
  ,Q0013       TYPE OF COLUMN TABL$P_CS_POLL.Q0013 
  ,Q0014       TYPE OF COLUMN TABL$P_CS_POLL.Q0014 
  ,Q0015       TYPE OF COLUMN TABL$P_CS_POLL.Q0015 
  ,Q0016       TYPE OF COLUMN TABL$P_CS_POLL.Q0016 
  ,Q0017       TYPE OF COLUMN TABL$P_CS_POLL.Q0017 
  ,Q0018       TYPE OF COLUMN TABL$P_CS_POLL.Q0018 
  ,Q0019       TYPE OF COLUMN TABL$P_CS_POLL.Q0019 
  ,Q0020       TYPE OF COLUMN TABL$P_CS_POLL.Q0020 
)AS 
BEGIN 
  DATE_FROM = :Q_DATE_FROM;
  DATE_TO   = :Q_DATE_TO;
  FOR 
    SELECT FL.ID, FL.NAME 
    FROM   TABL$R_FILIALS FL 
    ORDER BY FL.ID 
    INTO   :FILIAL_ID, :FILIAL_NAME 
  DO 
    BEGIN 
    SELECT SUM(P.Q0001),SUM(P.Q0002),SUM(P.Q0003),SUM(P.Q0004),SUM(P.Q0005) 
          ,SUM(P.Q0006),SUM(P.Q0007),SUM(P.Q0008),SUM(P.Q0009),SUM(P.Q0010) 
          ,SUM(P.Q0011),SUM(P.Q0012),SUM(P.Q0013),SUM(P.Q0014),SUM(P.Q0015) 
          ,SUM(P.Q0016),SUM(P.Q0017),SUM(P.Q0018),SUM(P.Q0019),SUM(P.Q0020) 
    FROM  TABL$P_CS_POLL P 
    WHERE (P.REG_DATE >= :DATE_FROM) 
      AND (P.REG_DATE  < :DATE_TO) 
      AND (P.FILIAL_ID = :FILIAL_ID) 
    INTO  :Q0001,:Q0002,:Q0003,:Q0004,:Q0005,:Q0006,:Q0007,:Q0008,:Q0009,:Q0010 
         ,:Q0011,:Q0012,:Q0013,:Q0014,:Q0015,:Q0016,:Q0017,:Q0018,:Q0019,:Q0020; 
    SUSPEND; 
    END 
END
