EXECUTE BLOCK (
   Q_D_ID              TYPE OF COLUMN TABL$D_1000140.ID = ?ID
)RETURNS (
   ID                      TYPE OF COLUMN TABL$D_1000140.ID
  ,NAME                    TYPE OF COLUMN TABL$D_1000140.NAME
  ,FLAG_DELETE             TYPE OF COLUMN TABL$D_1000140.FLAG_DELETE
  ,J_ID                    TYPE OF COLUMN TABL$D_1000140.J_ID
  ,CND_VALUE               TYPE OF COLUMN TABL$D_1000140.CND_VALUE
  ,ACC_ID_DEB              TYPE OF COLUMN TABL$D_1000140.ACC_ID_DEB
  ,ACC_NAME_DEB            TYPE OF COLUMN TABL$R_BUHG_ACCS.NAME
  ,SUBKONTO_ID_DEB         TYPE OF COLUMN TABL$D_1000140.SUBKONTO_ID_DEB
  ,SUBKONTO_NAME_DEB       TYPE OF COLUMN TABL$D_1000140.NAME
  ,SUBKONTO_QUANT_DEB      TYPE OF COLUMN TABL$D_1000140.SUBKONTO_QUANT_DEB
  ,ACC_ID_KRED             TYPE OF COLUMN TABL$D_1000140.ACC_ID_KRED
  ,ACC_NAME_KRED           TYPE OF COLUMN TABL$R_BUHG_ACCS.NAME
  ,SUBKONTO_ID_KRED        TYPE OF COLUMN TABL$D_1000140.SUBKONTO_ID_KRED
  ,SUBKONTO_NAME_KRED      TYPE OF COLUMN TABL$D_1000140.NAME
  ,SUBKONTO_QUANT_KRED     TYPE OF COLUMN TABL$D_1000140.SUBKONTO_QUANT_KRED
  ,J_ID_ORD_DEB            TYPE OF COLUMN TABL$D_1000140.J_ID_ORD_DEB
  ,J_TYPE_ID_ORD_DEB       TYPE OF COLUMN TABL$J_4.TYPE_ID
  ,J_TYPE_NAME_ORD_DEB     TYPE OF COLUMN TABL$_TB_DOCS.NAME
  ,J_DOCNUMBERSTR_ORD_DEB  TYPE OF COLUMN TABL$J_4.DOCNUMBERSTR
  ,J_DATE_COMMIT_ORD_DEB   TYPE OF COLUMN TABL$J_4.DATE_COMMIT
  ,J_DOCSUM_ORD_DEB        TYPE OF COLUMN TABL$J_4.DOCSUM
  ,J_ID_ORD_KRED           TYPE OF COLUMN TABL$D_1000140.J_ID_ORD_KRED
  ,J_TYPE_ID_ORD_KRED      TYPE OF COLUMN TABL$J_4.TYPE_ID
  ,J_TYPE_NAME_ORD_KRED    TYPE OF COLUMN TABL$_TB_DOCS.NAME
  ,J_DOCNUMBERSTR_ORD_KRED TYPE OF COLUMN TABL$J_4.DOCNUMBERSTR
  ,J_DATE_COMMIT_ORD_KRED  TYPE OF COLUMN TABL$J_4.DATE_COMMIT
  ,J_DOCSUM_ORD_KRED       TYPE OF COLUMN TABL$J_4.DOCSUM
)AS
BEGIN
  FOR
    SELECT  DB.ID, DB.NAME, DB.FLAG_DELETE, DB.J_ID, DB.CND_VALUE
           ,DB.ACC_ID_DEB , DB.SUBKONTO_ID_DEB , DB.SUBKONTO_QUANT_DEB ,DB.J_ID_ORD_DEB
           ,DB.ACC_ID_KRED, DB.SUBKONTO_ID_KRED, DB.SUBKONTO_QUANT_KRED,DB.J_ID_ORD_KRED
           ,(SELECT FIRST 1 B1.NAME FROM TABL$R_BUHG_ACCS B1 WHERE (B1.ID = DB.ACC_ID_DEB ))
           ,(SELECT FIRST 1 B2.NAME FROM TABL$R_BUHG_ACCS B2 WHERE (B2.ID = DB.ACC_ID_KRED))
    FROM   TABL$D_1000140 DB
    WHERE  (DB.ID = :Q_D_ID)
    ORDER BY DB.ID
    INTO    :ID, :NAME, :FLAG_DELETE, :J_ID, :CND_VALUE
           ,:ACC_ID_DEB , :SUBKONTO_ID_DEB , :SUBKONTO_QUANT_DEB , :J_ID_ORD_DEB
           ,:ACC_ID_KRED, :SUBKONTO_ID_KRED, :SUBKONTO_QUANT_KRED, :J_ID_ORD_KRED
           ,:ACC_NAME_DEB, :ACC_NAME_KRED
  DO
    BEGIN
    SUBKONTO_NAME_DEB  = '';
    SUBKONTO_NAME_KRED = '';
    SELECT FIRST 1 P.SUBKONTO_NAME FROM PROC$R_BUHG_ACCS_SUBKONTO(:ACC_ID_DEB ,:SUBKONTO_ID_DEB ) P INTO :SUBKONTO_NAME_DEB;
    SELECT FIRST 1 P.SUBKONTO_NAME FROM PROC$R_BUHG_ACCS_SUBKONTO(:ACC_ID_KRED,:SUBKONTO_ID_KRED) P INTO :SUBKONTO_NAME_KRED;
    J_TYPE_ID_ORD_DEB      = 0;
    J_TYPE_NAME_ORD_DEB    = '';
    J_DOCNUMBERSTR_ORD_DEB = '';
    J_DATE_COMMIT_ORD_DEB  = NULL;
    J_DOCSUM_ORD_DEB       = 0;
    IF(:J_ID_ORD_DEB <> 0)THEN
      BEGIN
      SELECT FIRST 1 J.TYPE_ID, DD.NAME, J.DOCNUMBERSTR, J.DATE_COMMIT, J.DOCSUM
      FROM   TABL$J_4 J, TABL$_TB_DOCS DD
      WHERE  (J.ID  = :J_ID_ORD_DEB)
        AND  (DD.ID = J.TYPE_ID)
      INTO   :J_TYPE_ID_ORD_DEB, :J_TYPE_NAME_ORD_DEB, :J_DOCNUMBERSTR_ORD_DEB,:J_DATE_COMMIT_ORD_DEB, :J_DOCSUM_ORD_DEB;
      END
    J_TYPE_ID_ORD_KRED      = 0;
    J_TYPE_NAME_ORD_KRED    = '';
    J_DOCNUMBERSTR_ORD_KRED = '';
    J_DATE_COMMIT_ORD_KRED  = NULL;
    J_DOCSUM_ORD_KRED       = 0;
    IF(:J_ID_ORD_KRED <> 0)THEN
      BEGIN
      SELECT FIRST 1 J.TYPE_ID, DD.NAME, J.DOCNUMBERSTR, J.DATE_COMMIT, J.DOCSUM
      FROM   TABL$J_4 J, TABL$_TB_DOCS DD
      WHERE  (J.ID  = :J_ID_ORD_KRED)
        AND  (DD.ID = J.TYPE_ID)
      INTO   :J_TYPE_ID_ORD_KRED, :J_TYPE_NAME_ORD_KRED, :J_DOCNUMBERSTR_ORD_KRED,:J_DATE_COMMIT_ORD_KRED, :J_DOCSUM_ORD_KRED;
      END
    SUSPEND;
    END
END
