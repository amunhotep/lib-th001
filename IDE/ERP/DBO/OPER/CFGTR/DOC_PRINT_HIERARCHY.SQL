WITH RECURSIVE TTT AS(
  SELECT TT1.ROOT_ID, TT1.ID, TT1.PARENT_ID, TT1.NAME, TT1.NAME2, (TT1.ID||'-'||TT1.NAME2) AS NAMEEX, CAST('' AS VARCHAR(512)) AS INDENT
        ,(SELECT FIRST 1 D11.COLOR_FRG FROM TABL$_TB_DOCS D11 WHERE (D11.ID = TT1.ID)) AS COLOR_FRG
        ,(SELECT FIRST 1 D12.COLOR_BGR FROM TABL$_TB_DOCS D12 WHERE (D12.ID = TT1.ID)) AS COLOR_BGR
  FROM   TABL$_TB_TYPES TT1
  WHERE  (TT1.ID = 4)
  UNION ALL
  SELECT TT2.ROOT_ID, TT2.ID, TT2.PARENT_ID, TT2.NAME, TT2.NAME2, (TT3.INDENT||TT2.ID||'-'||TT2.NAME2) AS NAMEEX, ('    '||TT3.INDENT) AS INDENT
        ,(SELECT FIRST 1 D21.COLOR_FRG FROM TABL$_TB_DOCS D21 WHERE (D21.ID = TT2.ID)) AS COLOR_FRG
        ,(SELECT FIRST 1 D22.COLOR_BGR FROM TABL$_TB_DOCS D22 WHERE (D22.ID = TT2.ID)) AS COLOR_BGR
  FROM   TABL$_TB_TYPES TT2, TTT TT3
  WHERE  (TT2.PARENT_ID = TT3.ID)
)
SELECT T.ID, T.PARENT_ID, T.NAMEEX
      ,COALESCE(T.COLOR_FRG,0) AS COLOR_FRG, COALESCE(T.COLOR_BGR, 0xFFFFFF) AS COLOR_BGR
FROM   TTT T
