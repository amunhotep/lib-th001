/* PEAKTOP:IDE/ERP/DBO/SQL/LOAD_LOCAL.SQL */
EXECUTE BLOCK RETURNS(
   LANG_ID   TYPE OF COLUMN TABL$R_COUNTRIES.ID
  ,LANG_NAME TYPE OF COLUMN TABL$R_COUNTRIES.NAME
)AS
  DECLARE VARIABLE P_SQL TYPE OF COLUMN TABL$R_COUNTRIES.NAME;
  DECLARE VARIABLE P_CNT TYPE OF COLUMN TABL$R_COUNTRIES.ID;
BEGIN
  P_CNT = 0;
  IF(EXISTS(
      SELECT RF.RDB$FIELD_ID
      FROM   RDB$RELATION_FIELDS RF
      WHERE  (TRIM(RF.RDB$RELATION_NAME) = 'TABL$R_COUNTRIES')
        AND  (TRIM(RF.RDB$FIELD_NAME)    = 'FLAG_INTRF')
  ))THEN
    BEGIN
    P_SQL =
      'SELECT C.ID, C.LANG_NAME  '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'FROM   TABL$R_COUNTRIES C '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'WHERE  (C.FLAG_INTRF = 1) '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'ORDER BY C.ID ';
    FOR EXECUTE STATEMENT :P_SQL INTO :LANG_ID, :LANG_NAME DO
      BEGIN
      SUSPEND;
      P_CNT = :P_CNT + 1;
      END
    END
  IF(:P_CNT = 0)THEN
    BEGIN
    LANG_ID   = 1000054;
    LANG_NAME = 'Русский';
    SUSPEND;
    END
END
