EXECUTE BLOCK AS
  DECLARE VARIABLE P_RELATION_NAME DOMN$PSTRING;
  DECLARE VARIABLE P_TRIGGER_NAME  DOMN$PSTRING;
  DECLARE VARIABLE P_SQL           DOMN$BLOB_SQL;
BEGIN
  FOR
    SELECT UPPER(TRIM(R.RDB$RELATION_NAME))
    FROM   RDB$RELATIONS R
    WHERE  (R.RDB$RELATION_NAME     STARTING WITH 'TABL$')
      AND  (R.RDB$RELATION_NAME NOT STARTING WITH 'TABL$_')
    INTO   :P_RELATION_NAME
  DO
    BEGIN
    P_TRIGGER_NAME = SUBSTRING(:P_RELATION_NAME FROM 5);
    P_TRIGGER_NAME = 'TRIG'||:P_TRIGGER_NAME;
    IF(CHAR_LENGTH(:P_TRIGGER_NAME) > 22)THEN
      P_TRIGGER_NAME = SUBSTRING(:P_TRIGGER_NAME FROM 1 FOR 22);
    P_SQL =
      'CREATE OR ALTER TRIGGER '||:P_TRIGGER_NAME||'_ADIU_255 FOR '||:P_RELATION_NAME||' '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'ACTIVE AFTER INSERT OR UPDATE OR DELETE POSITION 255 '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'AS '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'BEGIN  '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      '  POST_EVENT '''||:P_RELATION_NAME||''';  '||ASCII_CHAR(13)||ASCII_CHAR(10)||
      'END ';
    EXECUTE STATEMENT :P_SQL;
    END
END
