EXECUTE BLOCK RETURNS(
  FILIAS DOMN$INTEGER
)AS
  DECLARE VARIABLE P_SQL DOMN$BLOB_SQL;
BEGIN
  FILIAS = 0;
  IF(EXISTS(
      SELECT G.RDB$GENERATOR_ID
      FROM   RDB$GENERATORS G
      WHERE  (TRIM(G.RDB$GENERATOR_NAME) = 'GENR$R_FILIALS_ID_DEFAULT')
  ))THEN
    BEGIN
    P_SQL = 'SELECT FIRST 1 GEN_ID(GENR$R_FILIALS_ID_DEFAULT,0) FROM RDB$DATABASE ';
    EXECUTE STATEMENT :P_SQL INTO :FILIAS;
    END
  SUSPEND;
END
