EXECUTE BLOCK(
  Q_TB_ID    TYPE OF COLUMN TABL$_TB_COLS.TB_ID  = ?TB_ID
 ,Q_TC_ID    TYPE OF COLUMN TABL$_TB_COLS.ID     = ?ID
 ,Q_ROLE_ID  TYPE OF COLUMN TABL$_USERS_ROLES.ID = ?ROLE_ID
)RETURNS(
  TB_ID      TYPE OF COLUMN TABL$_TB_COLS.TB_ID
 ,ID         TYPE OF COLUMN TABL$_TB_COLS.ID
 ,ACCSS      TYPE OF COLUMN TABL$_TB_COLS.ACCSS
 ,ACCSSW     TYPE OF COLUMN TABL$_TB_COLS.ACCSSW
 ,IMG_IDX    TYPE OF COLUMN TABL$_USERS_ROLES.ID
 ,ROLE_ID    TYPE OF COLUMN TABL$_USERS_ROLES.ID
 ,ROLE_NAME  TYPE OF COLUMN TABL$_USERS_ROLES.NAME
 ,FLAG_READ  TYPE OF COLUMN TABL$_TB_COLS.FLAG_DELETE
 ,FLAG_WRITE TYPE OF COLUMN TABL$_TB_COLS.FLAG_DELETE
)AS
BEGIN
  IMG_IDX = 0;
  TB_ID   = :Q_TB_ID;
  ID      = :Q_TC_ID;
  SELECT FIRST 1 T.ACCSS, T.ACCSSW
  FROM   TABL$_TB_COLS T
  WHERE  (T.TB_ID = :TB_ID)
    AND  (T.ID = :ID)
  INTO   :ACCSS, :ACCSSW;
  FOR SELECT R.ID, R.NAME FROM TABL$_USERS_ROLES R WHERE((R.ID = :Q_ROLE_ID) OR (:Q_ROLE_ID < 0)) ORDER BY R.ID INTO :ROLE_ID, :ROLE_NAME DO
    BEGIN
    FLAG_READ  = 0;
    FLAG_WRITE = 0;
    IF(:ACCSS  CONTAINING '~'||:ROLE_ID||'~')THEN FLAG_READ  = 1;
    IF(:ACCSSW CONTAINING '~'||:ROLE_ID||'~')THEN FLAG_WRITE = 1;
    SUSPEND;
    END
END
