EXECUTE BLOCK(
   Q_GENR_NAME TYPE OF COLUMN TABL$R_FIRMS.NAME  = ?GENR_NAME
)RETURNS(
   GENR_NAME   TYPE OF COLUMN TABL$R_FIRMS.NAME
  ,GENR_DESCR  TYPE OF COLUMN TABL$R_FIRMS.NAME
  ,GENR_VALUE  TYPE OF COLUMN TABL$R_FIRMS.ID
  ,FLAG_EXISTS TYPE OF COLUMN TABL$R_FIRMS.FLAG_DELETE
)AS
  DECLARE VARIABLE P_SQL TYPE OF COLUMN TABL$R_FIRMS.NAME;
BEGIN
  FOR
    SELECT TMP.NAME, TMP.DESCR
    FROM   (SELECT FIRST 1 'GENR$P_TMCQNT_FIFO'        AS NAME,'ТМЦ: Метод расхода FIFO (иначе LIFO)' AS DESCR
            FROM RDB$DATABASE
            UNION ALL
            SELECT FIRST 1 'GENR$J_4_DELETE_COMMITTED' AS NAME,'Документы: Разрешать удаление проведенных' AS DESCR
            FROM RDB$DATABASE
            UNION ALL
            SELECT FIRST 1 'GENR$_LOG_MSG_DO'          AS NAME,'Протоколирование действий пользователей' AS DESCR
            FROM RDB$DATABASE
           ) TMP
    WHERE (TMP.NAME = :Q_GENR_NAME)       
    INTO  :GENR_NAME, :GENR_DESCR
  DO
    BEGIN
    FLAG_EXISTS = 0;
    GENR_VALUE  = 0;
    IF(EXISTS(
      SELECT G.RDB$GENERATOR_ID
      FROM   RDB$GENERATORS G
      WHERE  (TRIM(G.RDB$GENERATOR_NAME) = :GENR_NAME)
    ))THEN FLAG_EXISTS = 1;
    IF(:FLAG_EXISTS = 1)THEN
      BEGIN
      P_SQL = 'SELECT FIRST 1 GEN_ID('||:GENR_NAME||', 0) FROM RDB$DATABASE ';
      EXECUTE STATEMENT :P_SQL INTO :GENR_VALUE;
      END
    SUSPEND;
    END
END
